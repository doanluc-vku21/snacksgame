.board {
  display: grid;
  margin: 20px auto;
  background-color: #222;
  border: 3px solid #4caf50;
  box-shadow: 0 0 15px #4caf50;
  position: relative; /* S·ª¨A L·ªñI: ƒê·∫∑t l√†m g·ªëc t·ªça ƒë·ªô cho c√°c ph·∫ßn t·ª≠ con */
}

.cell {
  width: 20px;
  height: 20px;
  background-color: #111;
}

/* --- LOGIC SKIN M·ªöI --- */

/* Style chung cho T·∫§T C·∫¢ R·∫ÆN (ƒê·∫ßu/Th√¢n) */
.cell.snake-body-player,
.cell.snake-body-ai {
  border-radius: 4px;
}
.cell.snake-head-player,
.cell.snake-head-ai {
  border-radius: 8px 8px 4px 4px; /* Tr√≤n ·ªü ƒë·∫ßu */
  position: relative;
  z-index: 2; /* N·ªïi l√™n tr√™n th√¢n */
}

/* --- R·∫ÆN NG∆Ø·ªúI CH∆†I (√Åp d·ª•ng skin) --- */
.cell.snake-head-player.skin-default { background: #4caf50; border: 1px solid #8bc34a; }
.cell.snake-body-player.skin-default { background: #8bc34a; border: 1px solid #4caf50; }

.cell.snake-head-player.skin-blue { background: #03a9f4; border: 1px solid #00bcd4; }
.cell.snake-body-player.skin-blue { background: #00bcd4; border: 1px solid #03a9f4; }

.cell.snake-head-player.skin-red { background: #f44336; border: 1px solid #e91e63; }
.cell.snake-body-player.skin-red { background: #e91e63; border: 1px solid #f44336; }

.cell.snake-head-player.skin-purple { background: #673ab7; border: 1px solid #9c27b0; }
.cell.snake-body-player.skin-purple { background: #9c27b0; border: 1px solid #673ab7; }

.cell.snake-head-player.skin-ice { background: #e0f7fa; border: 1px solid #80deea; }
.cell.snake-body-player.skin-ice { background: #b2ebf2; border: 1px solid #e0f7fa; }

.cell.snake-head-player.skin-rainbow,
.cell.snake-body-player.skin-rainbow { 
  animation: rainbow 0.5s infinite;
}

/* --- R·∫ÆN ƒê·ªêI TH·ª¶ (AI) (M√†u T√≠m c·ªë ƒë·ªãnh) --- */
.cell.snake-head-ai {
  background: #9c27b0; /* T√≠m ƒë·∫≠m (gi·ªëng skin purple) */
  border: 1px solid #ba68c8;
}
.cell.snake-body-ai {
  background: #ba68c8; /* T√≠m nh·∫°t */
  border: 1px solid #9c27b0;
}

/* --- C√ÅC V·∫¨T TH·ªÇ KH√ÅC --- */

/* S·ª¨A L·ªñI: C·∫≠p nh·∫≠t style cho m·ªìi ƒë·ªÉ hi·ªÉn th·ªã emoji */
.food {
  position: absolute;
  /* background-color: red; <-- ƒê√£ x√≥a */
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px; /* Ch·ªânh k√≠ch th∆∞·ªõc emoji cho ph√π h·ª£p */
  line-height: 1;
  z-index: 2;
  text-shadow: 0 0 5px black; /* Th√™m b√≥ng ƒë·ªÉ emoji n·ªïi b·∫≠t h∆°n */
}

/* M·ªìi c·ªßa AI */
.ai-food {
  filter: grayscale(80%);
  opacity: 0.7;
}

.cell.obstacle {
  background-color: #795548;
  border: 1px solid #4e342e;
  border-radius: 2px;
  box-shadow: inset 0 0 5px black;
}

/* Hi·ªáu ·ª©ng B·∫•t t·ª≠ (GHI ƒê√à l√™n skin) */
.cell.snake-head-player.invincible,
.cell.snake-body-player.invincible {
  animation: rainbow 0.5s infinite;
  border: none;
}

@keyframes rainbow {
  0% { background-color: #f44336; }
  25% { background-color: #ff9800; }
  50% { background-color: #ffeb3b; }
  75% { background-color: #4caf50; }
  100% { background-color: #03a9f4; }
}

/* V·∫≠t ph·∫©m (Power-up) */
.power-up { /* S·ª¨A L·ªñI: Thay ƒë·ªïi selector ƒë·ªÉ kh·ªõp v·ªõi class trong Board.js */
  position: absolute;
  font-size: 16px; 
  line-height: 20px;
  text-align: center;
  background-color: #333;
  border-radius: 50%;
  animation: pulse 1s infinite;
  z-index: 5; /* ƒê·∫£m b·∫£o hi·ªÉn th·ªã tr√™n c√°c th√†nh ph·∫ßn kh√°c */
}

@keyframes pulse {
  0% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
  70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
  100% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}

.power-up.power-up-score_boost { background-color: #4caf50; } /* S·ª¨A L·ªñI: Selector kh·ªõp */
.power-up.power-up-slow_mo { background-color: #03a9f4; }    /* S·ª¨A L·ªñI: Selector kh·ªõp */
.power-up.power-up-invincible { background-color: #ffeb3b; } /* S·ª¨A L·ªñI: Selector kh·ªõp */
/* ===========================
   üé® CSS CHO C√ÅC SKIN M·ªöI (TRONG GAME)
   =========================== */

/* --- Skin V√†ng Kim (Gold) --- */
.cell.snake-head-player.skin-gold,
.cell.snake-body-player.skin-gold {
  background: linear-gradient(135deg, #FFF700, #FFD700, #FFA500, #FFD700);
  border: 1px solid #FFD700;
  box-shadow: 0 0 5px #FFD700;
}

/* --- Skin B√≥ng Ma (Ghost) --- */
.cell.snake-head-player.skin-ghost,
.cell.snake-body-player.skin-ghost {
  background: rgba(220, 230, 255, 0.5); 
  border: 1px solid rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(2px); 
}

/* --- Skin Dung Nham (Lava) (Hi·ªáu ·ª©ng ƒê·ªòNG) --- */
/* 1. ƒê·ªãnh nghƒ©a Keyframes (n·∫øu ch∆∞a c√≥) */
@keyframes lava-flow {
  0%   { 
    background-color: #FF4500; /* Cam ƒë·ªè */
    box-shadow: 0 0 10px #FF8C00, inset 0 0 5px #FFD700; 
  }
  50%  { 
    background-color: #FFD700; /* V√†ng s√°ng */
    box-shadow: 0 0 15px #FFD700, inset 0 0 10px #FF4500; 
  }
  100% { 
    background-color: #FF4500; 
    box-shadow: 0 0 10px #FF8C00, inset 0 0 5px #FFD700; 
  }
}

/* 2. √Åp d·ª•ng Keyframes */
.cell.snake-head-player.skin-lava,
.cell.snake-body-player.skin-lava {
  animation: lava-flow 1.5s infinite;
  border: none;
}

/* --- Skin L·ªói Tƒ©nh (Glitch) (Hi·ªáu ·ª©ng ƒê·ªòNG) --- */
/* 1. ƒê·ªãnh nghƒ©a Keyframes (n·∫øu ch∆∞a c√≥) */
@keyframes glitch-effect {
  0%, 100% { 
    transform: translate(0, 0); 
    box-shadow: none;
  }
  20% { 
    transform: translate(-3px, 3px); 
    box-shadow: 3px 0 0 #FF00FF, -3px 0 0 #00FFFF;
  }
  40% { 
    transform: translate(3px, -3px);
    box-shadow: none;
  }
  60% { 
    transform: translate(-3px, -3px);
    box-shadow: 3px 0 0 #FF00FF, -3px 0 0 #00FFFF;
  }
  80% { 
    transform: translate(3px, 3px);
    box-shadow: none;
  }
}

/* 2. √Åp d·ª•ng Keyframes */
.cell.snake-head-player.skin-glitch,
.cell.snake-body-player.skin-glitch {
  background: #FFF; /* N·ªÅn tr·∫Øng */
  border: 1px solid #000;
  animation: glitch-effect 0.2s infinite;
}